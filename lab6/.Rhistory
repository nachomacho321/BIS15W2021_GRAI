filter(year=="2000") %>%
tabyl(country) %>%
arrange(desc(n)
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
arrange(desc(n))
catch_stats %>%
filter(year=="2000") %>%
biggest_catch=max(tabyl(country))
catch_stats %>%
filter(year=="2000") %>%
biggest_catch=max(country)
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
arrange(desc(country))
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
arrange(desc(n))
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
count(country, catch, year, sort = T)
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
count(country, sort = T)
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
count(catch, sort = T)
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
arrange(desc(n))
catch_stats %>%
filter(year=="2000") %>%
max(tabyl(country))
catch_stats %>%
filter(year=="2000") %>%
tabyl(country)%>%
arrange(desc(n))
catch_stats %>%
filter_if(year>"1990" | year < "2000")
catch_stats %>%
filter(year>"1990" | year < "2000")
catch_stats %>%
filter(year>"1990" | year < "2000") %>%
arrange(year)
catch_stats %>%
filter(year>"1990" & year < "2000") %>%
arrange(year)
catch_stats %>%
filter(year>="1990" & year <= "2000") %>%
arrange(year)
catch_stats %>%
filter(year>="1990" & year <= "2000") %>%
arrange(desc(year))
catch_stats %>%
filter(year>="1990" & year <= "2000") %>%
tabyl(country) %>%
arrange(desc(n))
catch_stats %>%
filter(year>="1990" & year <= "2000") %>%
filter(asfis_species_name="Sardina pilchardus")
catch_stats %>%
filter(year>="1990" & year <= "2000") %>%
filter(asfis_species_name=="Sardina pilchardus")
tabyl(country) %>%
arrange(desc(n))
catch_stats %>%
filter(year>="1990" & year <= "2000") %>%
filter(asfis_species_name=="Sardina pilchardus") %>%
tabyl(country) %>%
arrange(desc(n))
knitr::opts_chunk$set(echo = TRUE)
catch_stats %>%
filter(year=="2000") %>%
tabyl(country)%>%
top_n() %>%
arrange(desc(n))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
fisheries <- janitor::clean_names(fisheries)
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy %>%
summarise(across(c(country),
n_distinct))
fisheries_tidy %>%
tabyl(country)
#glimpse(fisheries_tidy)
catch_stats <- fisheries_tidy %>%
select(country, isscaap_group_number, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
#glimpse(catch_stats)
catch_stats %>%
summarise(across(asfis_species_number,
n_distinct))
catch_stats %>%
filter(year=="2000") %>%
tabyl(country)%>%
top_n() %>%
arrange(desc(n))
catch_stats %>%
filter(year=="2000") %>%
tabyl(country)%>%
top_n(country) %>%
arrange(desc(n))
catch_stats %>%
filter(year=="2000") %>%
tabyl(country)%>%
slice_max() %>%
arrange(desc(n))
catch_stats %>%
filter(year=="2000") %>%
tabyl(country)%>%
slice_max()
catch_stats %>%
filter(year=="2000") %>%
tabyl(country)#%>%
#slice_max()
catch_stats %>%
filter(year=="2000") %>%
tabyl(country#%>%
slice_max()
catch_stats %>%
filter(year=="2000") %>%
tabyl(country%>%
slice_max()
catch_stats %>%
filter(year=="2000") %>%
tabyl(country %>%
slice_max()
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
slice_max()
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
head(sort(country, decreasing = TRUE), n =1)
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
head(sort(n, decreasing = TRUE), n =1)
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
head(sort(percent, decreasing = TRUE), n =1)
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) #%>%
#head(sort(percent, decreasing = TRUE), n =1)
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
head(sort(percent, decreasing = FALSE), n =1)
catch_stats %>%
filter(year=="2000") %>%
#tabyl(country) %>%
head(sort(percent, decreasing = FALSE), n =1)
catch_stats %>%
filter(year=="2000") %>%
#tabyl(country) %>%
head(sort(percent, decreasing = TRUE), n =1)
catch_stats %>%
filter(year=="2000") %>%
#tabyl(country) %>%
head(sort(catch, decreasing = TRUE), n =1)
catch_stats %>%
filter(year=="2000") %>%
filter_max(tabyl(country))
catch_stats %>%
filter(year=="2000") %>%
filter(max(tabyl(country)))
catch_stats %>%
filter(year=="2000") %>%
filter(max(tabyl(catch)))
catch_stats %>%
filter(year=="2000") %>%
group_by(country)
catch_stats %>%
filter(year=="2000") %>%
group_by(country) %>%
top_n(1, catch)
catch_stats %>%
filter(year=="2000") %>%
group_by(catch) %>%
top_n(1, catch)
catch_stats %>%
filter(year=="2000") %>%
group_by(catch) %>%
top_n(1)
catch_stats %>%
filter(year=="2000") %>%
max(catch, na.rm = T)
catch_stats %>%
filter(year=="2000") %>%
max(country, na.rm = T)
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
arrange(desc(n))
catch_stats %>%
filter(year >= "2008" & year <= "2012") %>%
filter(asfis_species_name=="Cephalopoda") %>%
tabyl(country) %>%
arrange(desc(n))
penguins %>%
group_by(species) %>%
filter(!is.na(bill_length_mm)) %>%
summarize(mean_bill_length_mm=mean(bill_length_mm, na.rm = T))
library("tidyverse")
library("janitor")
library("skimr")
library("palmerpenguins")
glimpse(penguins)
penguins %>%
filter(!is.na(body_mass_g)) %>%
group_by(island) %>%
summarize(mean_body_mass_g=mean(body_mass_g),
n=n())
penguins %>%
group_by(island) %>%
summarize(number_NAs=sum(is.na(body_mass_g)))
penguins %>%
filter(!is.na(body_mass_g)) %>%
group_by(island) %>%
summarize(mean_body_mass_g=mean(body_mass_g),
sd_body_mass_g=sd(body_mass_g),
n=n())
penguins %>%
group_by(island, species) %>%
summarize(n=n(), .groups= 'keep')#the .groups argument here just prevents a warning message
penguins %>%
count(island, sort = T) #sort=T sorts the column in descending order
penguins %>%
group_by(island) %>%
summarize(n=n())
penguins %>%
count(island, species, sort = F)
penguins %>%
tabyl(species, island)
penguins %>%
tabyl(species, island) %>%
adorn_percentages() %>%
adorn_pct_formatting(digits = 1) %>%
adorn_ns()
penguins %>%
filter(species == "Adelie") %>%
filter(!is.na(bill_depth_mm)) %>%
filter(!is.na(bill_length_mm)) %>%
summarise(mean_bill_length_mm = mean(bill_length_mm),
mean_bill_depth_mm = mean(bill_depth_mm),
mean_body_mass_g = mean(body_mass_g),
n_samples = n())
penguins %>%
group_by(species) %>%
filter(!is.na(bill_length_mm)) %>%
summarize(mean_bill_length_mm=mean(bill_length_mm, na.rm = T))
names(penguins)
penguins %>%
summarize(distinct_species = n_distinct(species),
distinct_island = n_distinct(island),
distinct_sex = n_distinct(sex))
penguins %>%
summarize(across(c(species, island, sex), n_distinct))
penguins %>%
summarize(across(contains("mm"), mean, na.rm=T))
penguins %>%
group_by(sex) %>%
summarize(across(contains("mm"), mean, na.rm=T))
penguins %>%
summarise_all(n_distinct)
penguins %>%
summarise(across(!c(species, island, sex),
n_distinct))
penguins %>%
summarise(across(starts_with("bill"), n_distinct))
penguins %>%
group_by(species) %>%
summarise(across(contains("mm"), mean, na.rm=T),
nsamples=n())
penguins %>%
group_by(species) %>%
summarise(across(contains("mm"), sd, na.rm=T),
nsamples=n())
catch_stats %>%
filter(year=="2000") %>%
group_by(country) %>%
summarise(max_catch_2000=max(catch, na.rm = T))
catch_stats %>%
filter(year=="2000") %>%
group_by(country) %>%
summarise(max_catch_2000=max(catch, na.rm = T)) %>%
arrange(desc(max_catch_2000))
catch_stats %>%
filter(year=="2000") %>%
group_by(country) %>%
summarise(max_catch_2000=max(catch, na.rm = F))
catch_stats %>%
filter(year=="2000") %>%
group_by(country) %>%
summarise(max_catch_2000=max(catch, na.rm = T))
catch_stats %>%
filter(year=="2000") %>%
group_by(country) %>%
summarise(max_catch_2000=max(catch, na.rm = T)) %>%
arrange(desc(max_catch_2000))
catch_stats %>%
filter(year=="2000") %>%
group_by(country) %>%
max(catch)
catch_stats %>%
filter(year=="2000") %>%
group_by(country) %>%
max(catch, na.rm = T)
catch_stats %>%
filter(year=="2000") %>%
#group_by(country) %>%
max(catch, na.rm = T)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
fisheries <- janitor::clean_names(fisheries)
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy %>%
summarise(across(c(country),
n_distinct))
fisheries_tidy %>%
tabyl(country)
#glimpse(fisheries_tidy)
catch_stats <- fisheries_tidy %>%
select(country, isscaap_group_number, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
#glimpse(catch_stats)
catch_stats %>%
summarise(across(asfis_species_number,
n_distinct))
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
arrange(desc(n))
catch_stats %>%
filter(year=="2000") %>%
#group_by(country) %>%
max(catch, na.rm = T)
glimpse(catch_stats)
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
arrange(desc(n))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
fisheries <- janitor::clean_names(fisheries)
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy %>%
summarise(across(c(country),
n_distinct))
fisheries_tidy %>%
tabyl(country)
#glimpse(fisheries_tidy)
catch_stats <- fisheries_tidy %>%
select(country, isscaap_group_number, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
#glimpse(catch_stats)
catch_stats %>%
summarise(across(asfis_species_number,
n_distinct))
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
arrange(desc(n))
install.packages(c("backports", "brio", "htmltools"))
install.packages(c("backports", "brio", "htmltools"))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
fisheries <- janitor::clean_names(fisheries)
knitr::opts_chunk$set(echo = TRUE)
#glimpse(fisheries_tidy)
catch_stats <- fisheries_tidy %>%
select(country, isscaap_group_number, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
fisheries <- janitor::clean_names(fisheries)
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy %>%
summarise(across(c(country),
n_distinct))
fisheries_tidy %>%
tabyl(country)
#glimpse(fisheries_tidy)
catch_stats <- fisheries_tidy %>%
select(country, isscaap_group_number, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
#glimpse(catch_stats)
catch_stats %>%
summarise(across(asfis_species_number,
n_distinct))
catch_stats %>%
filter(year=="2000") %>%
tabyl(country) %>%
arrange(desc(n))
catch_stats %>%
select(country, year, catch) %>%
filter(year=="2000") %>%
summarize(max_catch=max(catch, na.rm = T))
group_by(country) %>%
summarize(sumcatch=sum(catch,na.rm=T),
totaln=n(),.groups= 'keep') %>%
arrange(desc(sumcatch))
fisheries_tidy %>%
filter(year=="2000") %>%
group_by(country) %>%
summarize(sumcatch=sum(catch,na.rm=T),
totaln=n(),.groups= 'keep') %>%
arrange(desc(sumcatch))
catch_stats %>%
filter(year=="2000") %>%
group_by(country) %>%
summarise(big_catch=sum(catch, na.rm = T))
catch_stats %>%
filter(year=="2000") %>%
group_by(country) %>%
summarise(big_catch=sum(catch, na.rm = T)) %>%
arrange(desc(big_catch))
catch_stats %>%
filter(year=="2000") %>%
group_by(country) %>%
summarise(big_catch=sum(catch, na.rm = T).
catch_stats %>%
filter(year=="2000") %>%
group_by(country) %>%
summarise(big_catch=sum(catch, na.rm = T),
n_total=n()) %>%
arrange(desc(big_catch))
